# ⚓ 게임 디자인 문서 (GDD): The Silent Abyss (정적의 심연)

**버전:** 1.0  
**장르:** 청각 기반 밀리터리 스릴러 / 전략 시뮬레이션  
**플랫폼:** Web (Chrome, Edge 등 WebGPU 지원 브라우저)  
**핵심 기술:** WebAudio(Wasm), WebGPU, Three.js

---

## 1. 기술 스택 (Technical Stack)

| 레이어 | 기술 스택 | 상세 역할 |
| :--- | :--- | :--- |
| **사운드 합성** | **WebAssembly (Rust/C++)** | 물리 기반 오디오 합성(엔진, 생물), 실시간 DSP 필터링, 정밀 수치 연산. |
| **연산 가속** | **WebGPU (Compute)** | 실시간 FFT(주파수 분석), 대규모 기포(Cavitation) 사운드 입자 계산, 음향 레이트레이싱. |
| **비주얼 엔진** | **Three.js (WebGPU)** | 중앙 스코프 내 3D 지형 렌더링, HUD 포스트 프로세싱(CRT, Bloom 효과). |
| **2D/UI** | **Vanilla JS + Canvas2D** | 전술 정보창(2D), 워터폴(LOFAR) 고속 렌더링, 시스템 상태 관리. |
| **오디오 출력** | **Web Audio API** | AudioWorklet을 통한 저지연 출력, 3D 공간 음향(PannerNode). |

---

## 2. 게임 메커니즘 (Game Mechanics)

### ① 청각적 식별 (Classification)
* **패시브 리스닝(Passive Listening):** 엔진 회전수(RPM), 프로펠러 날개 수(Blade Count)를 소리로 듣고 데이터베이스와 대조하여 함종을 식별합니다.
* **생물 음향(Bio-Acoustics):** 딱총새우의 소음, 고래의 노래 등 자연 소음 사이에서 인위적인 기계음을 분리해내는 것이 핵심 재미 요소입니다.

### ② 리스크 관리: Active vs Passive
* **패시브 모드 (2D 전용):** 소리만 듣는 상태. 발각 위험이 낮으나 정보가 불확실하며 2D 워터폴 데이터에 의존합니다.
* **액티브 소나 (3D 활성화):** 강한 음파(Ping)를 발사하여 주변 지형과 적의 위치를 3D 와이어프레임으로 즉시 시각화합니다. 단, 발사 즉시 적에게 내 위치가 노출됩니다.

### ③ 환경 물리 (Acoustic Physics)
* **온도 도약층(Thermocline):** 수온 차이에 의해 소리가 굴절되는 층을 이용하여 적의 탐지를 회피하는 전략적 위치 선점이 필요합니다.
* **배경 소음(Ambient Noise):** 수심과 지형에 따라 달라지는 배경 소음을 필터 조작으로 극복해야 합니다.

---

## 3. 유저 인터페이스 (User Interface)

디자인 컨셉: **"투박한 아날로그 군용 장비와 정밀한 데이터 시각화의 조화"**

### [2D 레이어: 메인 분석 패널]
* **LOFAR (Waterfall):** 시간축에 따른 주파수 강도 시각화. 적함 고유의 주파수 선(Line)을 추적합니다.
* **BTR (Bearing Time Recorder):** 360도 방위 중 소음이 유입되는 방향을 기록하여 적의 침로를 예측합니다.
* **System Monitor:** 산소, 수압, 배터리 잔량 등 잠수함 생존 지표 표시.

### [3D 레이어: 중앙 전술 스코프]
* **Tactical Wireframe:** 능동 소나 발사 시 Three.js로 구현된 해저 지형과 함선 실루엣이 입체적으로 스캔되어 나타납니다.
* **Scan Decay:** 스캔된 3D 정보는 시간이 지남에 따라 노이즈와 함께 서서히 사라지며 플레이어의 긴장감을 유발합니다.
* **Acoustic Focus:** 선택된 목표에 대한 음향 수신 감도를 집중시켜 세밀한 주파수 분석(LOFAR)과 프로펠러 시그니처(DEMON) 분석을 가능하게 합니다. 선택 시 배경 소음과 생물 음향(Bio-Acoustics)을 억제(Ducking)하고 목표물의 개별 기계음을 강조하는 멀티보이스 오디오 필터링 시스템을 포함합니다.

---

## 4. 오디오 디자인 (Audio Design)

* **엔진 및 기계음 (Wasm):** RPM에 따른 주파수 변화와 기계적 마찰음을 물리 모델링으로 합성합니다.
* **캐비테이션 (WebGPU):** 고속 항해 시 발생하는 수만 개의 기포 파열음을 병렬 연산으로 생성하여 압도적인 밀도감을 구현합니다.
* **공간감:** `ConvolverNode`를 사용하여 심해의 먹먹하고 넓은 잔향을 부여합니다.

---

## 5. 개발 로드맵 (Roadmap)

1.  **Phase 1:** AudioWorklet + Wasm 기반의 기초 사운드 합성 엔진 구축. (완료)
2.  **Phase 2:** WebGPU를 이용한 실시간 FFT 분석 및 2D 워터폴 UI 구현. (완료)
3.  **Phase 3:** Three.js WebGPURenderer 연동 및 3D 지형 스캔 셰이더 개발. (완료)
4.  **Phase 4:** 게임 루프(잠입, 식별, 교전) 및 환경 물리 효과 통합. (완료)
5.  **Phase 5:** 음향 물리 정밀화, WebGPU 최적화, 고도화된 식별 시스템 및 멀티보이스 오디오 포커싱 시스템 최적화. (완료)

---